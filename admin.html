<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a1a1a">
    <title>Admin Dashboard - Nails by Carolina</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="admin-styles.css">
    <script>
        // Apply theme on load
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
        }
    </script>
</head>
<body>
    <!-- Auth Check Script -->
    <script>
        // Check authentication
        if (sessionStorage.getItem('adminAuthenticated') !== 'true') {
            window.location.href = 'admin-login.html';
        }
        
        // Check session timeout (4 hours)
        const loginTime = new Date(sessionStorage.getItem('adminLoginTime'));
        const now = new Date();
        const hoursSinceLogin = (now - loginTime) / (1000 * 60 * 60);
        
        if (hoursSinceLogin > 4) {
            sessionStorage.removeItem('adminAuthenticated');
            sessionStorage.removeItem('adminLoginTime');
            window.location.href = 'admin-login.html';
        }
    </script>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo-section">
                <h2>ğŸ’… Nails by Carolina</h2>
                <p>Admin Dashboard</p>
            </div>
            
            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="icon">ğŸ“Š</span>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="appointments">
                    <span class="icon">ğŸ“…</span>
                    <span>Appointments</span>
                </a>
                <a href="#" class="nav-item" data-page="clients">
                    <span class="icon">ğŸ‘¥</span>
                    <span>Clients</span>
                </a>
                <a href="#" class="nav-item" data-page="calendar">
                    <span class="icon">ğŸ—“ï¸</span>
                    <span>Calendar</span>
                </a>
                <a href="#" class="nav-item" data-page="services">
                    <span class="icon">âœ¨</span>
                    <span>Services</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <span class="icon">âš™ï¸</span>
                    <span>Settings</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <button class="theme-toggle-admin" id="themeToggleAdmin">
                    <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M10 2v2m0 12v2M18 10h-2M4 10H2m14.364-5.364l-1.414 1.414M7.05 12.95l-1.414 1.414m9.728 0l-1.414-1.414M7.05 7.05L5.636 5.636" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M17 10.5A7 7 0 1 1 9.5 3a5.5 5.5 0 0 0 7.5 7.5z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                    </svg>
                    <span class="theme-label">Theme</span>
                </button>
                <a href="index.html" class="view-site-btn">
                    <span>ğŸŒ</span>
                    <span>View Website</span>
                </a>
                <button class="logout-btn" id="logoutBtn">
                    <span>ğŸšª</span>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="top-header">
                <div class="header-left">
                    <h1 id="pageTitle">Dashboard</h1>
                    <p id="pageSubtitle">Welcome back, Carolina!</p>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <input type="text" placeholder="Search...">
                        <span class="search-icon">ğŸ”</span>
                    </div>
                    <div class="notifications">
                        <span class="notif-icon">ğŸ””</span>
                        <span class="notif-badge">3</span>
                    </div>
                    <div class="user-profile">
                        <img src="images/image2.jpg" alt="Profile" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%22100%22%3E%3Crect fill=%22%23ddd%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-size=%2240%22%3EğŸ‘¤%3C/text%3E%3C/svg%3E'">
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="content-area" id="contentArea">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">ğŸ“…</div>
                        <div class="stat-info">
                            <h3>Today's Appointments</h3>
                            <p class="stat-number" id="todayCount">0</p>
                            <span class="stat-change" id="todayChange">Loading...</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">ğŸ’°</div>
                        <div class="stat-info">
                            <h3>Today's Revenue</h3>
                            <p class="stat-number" id="todayRevenue">$0</p>
                            <span class="stat-change" id="revenueChange">Loading...</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">ğŸ‘¥</div>
                        <div class="stat-info">
                            <h3>Total Clients</h3>
                            <p class="stat-number" id="totalClients">0</p>
                            <span class="stat-change" id="clientsChange">Loading...</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">ğŸ“Š</div>
                        <div class="stat-info">
                            <h3>This Month</h3>
                            <p class="stat-number" id="monthRevenue">$0</p>
                            <span class="stat-change" id="monthChange">Loading...</span>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="charts-row">
                    <div class="chart-card">
                        <h3>Booking Trends (Last 30 Days)</h3>
                        <canvas id="trendChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Services Distribution</h3>
                        <canvas id="servicesChart"></canvas>
                    </div>
                </div>

                <!-- Upcoming Appointments -->
                <div class="section-card">
                    <div class="section-header">
                        <h2>Upcoming Appointments</h2>
                        <div class="header-actions">
                            <button class="btn-filter" id="filterToday">Today</button>
                            <button class="btn-filter" id="filterWeek">This Week</button>
                            <button class="btn-filter active" id="filterAll">All</button>
                        </div>
                    </div>
                    <div class="appointments-list" id="appointmentsList">
                        <div class="loading">Loading appointments...</div>
                    </div>
                </div>

                <!-- Recent Clients -->
                <div class="section-card">
                    <div class="section-header">
                        <h2>Recent Clients</h2>
                        <button class="btn-primary" id="exportData">Export Data</button>
                    </div>
                    <div class="clients-list" id="clientsList">
                        <div class="loading">Loading clients...</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="database.js"></script>
    <script src="admin.js"></script>
</body>
</html>
